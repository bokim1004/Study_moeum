## 상태의 종류

1. 전역상태(Global State)
   프로젝트 전체에 영향을 끼치는 상태이다. 예를 들면, 유저 기능을 생각하면 된다. 이 또한 prop drilling방식을 활용해서 부모에서 자식으로 데이터를 전달한다.
2. 컴포넌트 간 상태(Cross Component State)
   여러가지 컴포넌트에 관리되는 상태를 나타낸다. 다수의 컴포넌트에서 쓰이고, 또 영향을 미치는 상태를 뜻한다. 프로젝트 곳곳에서 쓰이는 모달을 예로 들 수 있다. 보통 상위 컴포넌트에서 하위 컴포넌트로 prop을 넘겨 해당 컴포넌트까지 전달되도록 하는 prop drilling방식을 필요로 한다.

3. 지역상태(Local State)
   - 특정 컴포넌트 안에서만 관리되는 상태. 다른 컴포넌트들과 데이터를 공유하지 않는다. 예를 들면, input, selectbox등에서 사용자의 입력값을 받는 경우가 있다. (보통 Form데이터들이 지역상태에 속한다)

## 상태관리는 왜 필요한가?

서로 다른 두 컴포넌트에 같은 데이터가 필요하다고 할 때, 각 컴포넌트가 부모자식 관계로 되어있지 않은 이상, 각 컴포넌트 간의 직접적인 데이터 전달은 어렵다. 상태가 많아지고 어플리케이션이 복잡해질수록 prop을 추적하기는 점점 힘들어질 것이다. 그렇기에 각 어플리케이션에 알맞은 상태관리 툴을 선택해 상태를 잘 관리하는 것이 중요하다.

## context api

Context api는 리액트에서 만든, React 컴포넌트 트리 안에서 전역상태를 공유할 수 있도록 만들어진 방법이다.
"전역 상태관리 도구"라고 말하기 살짝 애매한 감이 있는데, 이는 context API는 아무것도 관리하지 않기 때문이다. Context API는 종속성을 주입하기 위한 도구일뿐이다. React에서의 실질적인 상태관리는 useState, useReducer를 통해 일어난다.

보통 상태관리라고 함은, 변화하는 데이터들을 관리하는 것인데 상태의 초기값을 저장하거나, 현재 상태의 값을 읽거나 새로운 데이터로 상태를 업데이트하는 등의 행위를 뜻한다.

하지만 Context는 이런 상태들을 직접적으로 관리해주지 않고, 단순히 이미 존재하는 상태를 다른 컴포넌트들과 쉽게 공유할 수 있게 해주는 역할을 한다.

Context api는 Context,provider, consumer로 설명할 수 있다.
Context는 전역상태를 저장하는 곳이다. Context내부에 Provider와 Consumer가 정의되어있고, Consumer는 context를 통해서 상태에 접근이 가능하다.

Provider는 전역 상태를 제공하는 역할을 한다. Context에 상태를 제공해서 다른 컴포넌트가 상태에 접근할 수 있도록 도와준다.

Consumer는 제공받은 전역 상태를 받아서 사용하는 역할을 한다. Context는 Consumer사이에 있는 첫 객체를 Context에 인자로 전달하기에 바로 JSX를 작성하면 안되고, 빈 객체를 작성하고나서 JSX를 작성해야 한다.

> Context API는 그 범위를 제대로 지정하지 않는다면, 불필요한 rerender를 일으키기도 한다. 각 Context를 잘 나누고 또 필요하다면 useMemo등을 사용해 코드를 작성하는 것이 좋다. 하지만 useMemo또한 연산이 들어가는 작업이 있기에, 정말 필요한 곳에 잘 사용하는 것이 중요하다.

## Redux

Redux는 전역 상태관리를 위한 도구. 어플리케이션 전체에 대한 중앙저장소 역할을 한다.
Redux는 크게 Store,Reducer,Action으로 설명할 수 있다.
`Store`는 저장소, 즉 전역상태를 저장하는 공간이다. 자바스크립트 객체 형태로 저장되어 있고, 오직 Reducer를 통해서만 접근할 수 있다. 여러개의 Context를 만들 수 있는 Context API와는 달리 Redux에서 store는 1개만 존재할 수 있다.

`Action`은 Reducer에게 보내는 Store에 대한 행동을 정의하는 자바스크립트 객체이다. 우리는 상태에 어떤 변화가 필요할 때, 액션을 발생시킨다. Action을 Reducer에게 전달하기 위해서는 dispatch메소드를 사용해야 한다. dispatch는 Store의 내장 함수 중 하나인데, 액션 객체를 넘겨줘서 상태를 업데이트한다.

`Reducer`는 이전 상태와 액션을 받아, 다음 상태를 반환하는 역할을 하는 순수 함수이다. Reducer를 통해서만 전역 상태를 변경하고 업데이트할 수 있다. 어떤 액션이 들어오는지 그 유형에 따라 이벤트를 처리하는 이벤트 리스너이다.여기서 중요한 점은 이전 상태를 변경한다는 점이 아니라 새로운 상태 객체를 생성해서 반환해야 한다는 사실이다.

## Redux가 Context API에 비해 가지는 8가지 강점들

1.  로컬스토리지에 상태를 영속적으로 저장하고 시작할 때 다시 불러오는 것에 뛰어나다.
2.  상태를 Server에서 미리 채워서, HTML에 담아 Client로 보내고, 앱을 시작할 때 다시 불러오는 것에 뛰어나다.
3.  사용자의 액션을 직렬화해서, 상태와 함께 자동으로 버그 리포트에 첨부할 수 있고, 개발자들은 이를 통해 에러를 재현할 수 있다.
4.  액션 객체를 네트워크를 통해 보내면, 코드를 크게 바꾸지 않고도 협업환경을 구현할 수 있다.
5.  코드를 크게 바꾸지 않고도 실행 취소 내역의 관리나 Optimistic Mutations(낙관적인 변경)을 구현할 수 있다.
6.  개발할 때, 상태 내역 사이를 오가고 액션 내역에서 현재 상태를 다시 계산하는 일을 TDD 스타일로 할 수 있다.
7.  개발자 도구가 완전한 조사, 제어를 할 수 있게 함으로써 개발자들이 자신의 앱을 위한 도구를 직접 만들 수 있게 해준다.
8.  비즈니스 로직을 대부분 재사용하면서 UI를 변경할 수 있게 한다.
